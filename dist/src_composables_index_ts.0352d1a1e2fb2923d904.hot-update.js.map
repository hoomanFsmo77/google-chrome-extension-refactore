{"version":3,"file":"src_composables_index_ts.0352d1a1e2fb2923d904.hot-update.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAkC;AAEJ;AACyC;AACzB;AAEvC,IAAMM,YAAY,GAACN,kDAAW,CAAC,MAAM,EAAC;EACzCO,KAAK,EAAC;IACF,OAAO;MACHC,WAAW,EAAC,KAAK;MACjBC,QAAQ,EAAC,EAAE;MACXC,eAAe,EAAC,KAAK;MACrBC,eAAe,EAAC,KAAK;MACrBC,KAAK,EAACC;KACT;EACL,CAAC;EACDC,OAAO,EAAC;IACJC,cAAc,0BAACR,KAAK;MAChB,OAAOA,KAAK,CAACC,WAAW;IAC5B,CAAC;IACDQ,gBAAgB,4BAACT,KAAK;MAClB,OAAOA,KAAK,CAACE,QAAQ,CAACQ,MAAM;IAChC;GACH;EACDC,OAAO,EAAC;IACEC,aAAa,yBAACC,SAAmB;;;;;;cACnC,IAAI,CAACV,eAAe,GAAC,IAAI;;;;cAEV,WAAMT,8CAAM,CAACoB,gEAA8B,EAAC;gBACnDG,MAAM,EAAC,MAAM;gBACbC,IAAI,EAACC,IAAI,CAACC,SAAS,CAAC;kBAChBf,KAAK,EAACQ,SAAS,CAACR,KAAK;kBACrBgB,QAAQ,EAACR,SAAS,CAACQ;iBACtB;eACJ,CAAC;;cANIC,IAAI,GAACC,SAMT;cACF,IAAI,CAAClB,KAAK,GAACQ,SAAS,CAACR,KAAK;cAC1B,IAAI,CAACJ,WAAW,GAAC,IAAI;cACrBL,wDAAS,CAAC,EAAE,EAAC0B,IAAI,CAACE,IAAI,CAAC;;;;cAEvB,IAAI,CAACvB,WAAW,GAAC,KAAK;cACtBwB,OAAO,CAACC,GAAG,CAACC,KAAG,CAAC;;;cAEhB,IAAI,CAACxB,eAAe,GAAC,KAAK;;;;;;;KAEjC;IACKyB,aAAa,yBAACf,SAAmB;;;;;;cACnC,IAAI,CAACT,eAAe,GAAC,KAAK;;;;cAEX,WAAMV,8CAAM,CAACoB,gEAA8B,CAAC;;cAAjDQ,IAAI,GAACC,SAA4C;cACvD,IAAI,CAACnB,eAAe,GAAE,CAACT,8DAAe,CAACkC,MAAM,CAACC,OAAO,CAACR,IAAI,CAAC,EAACT,SAAS,CAAC;cACtE,IAAG,CAAC,IAAI,CAACT,eAAe,EAAC;gBACf2B,UAAU,GAAClC,0DAAW,CAACgC,MAAM,CAACC,OAAO,CAACR,IAAI,CAAC,EAACT,SAAS,CAAC;gBAC5D,IAAI,CAACR,KAAK,GAACQ,SAAS,CAACR,KAAK;gBAC1B,IAAI,CAACJ,WAAW,GAAC,IAAI;gBACrBL,wDAAS,CAAC,EAAE,EAACmC,UAAU,CAAC,CAAC,CAAC,CAAC;;;;;cAI/B,IAAI,CAAC3B,eAAe,GAAC,IAAI;;;;;;;KAI/B;IACF4B,aAAa;MACTlC,2DAAY,CAAC,EAAE,CAAC;MAChB,IAAI,CAACO,KAAK,GAACC,SAAS;MACpB,IAAI,CAACL,WAAW,GAAC,KAAK;MACtB,IAAI,CAACC,QAAQ,GAAC,EAAE;IACpB;;CAKP,CAAC","sources":["webpack://template/./src/store/user.ts"],"sourcesContent":["import {defineStore} from \"pinia\";\r\nimport {User_Store,User_Info} from \"src/utils/Types\";\r\nimport {ofetch} from \"ofetch\";\r\nimport {loginValidation, setCookie,extractUser} from \"../utils/Helper\";\r\nimport {deleteCookie} from \"src/utils/Helper\";\r\n\r\nexport const useUserStore=defineStore('user',{\r\n    state:():User_Store=>{\r\n        return {\r\n            loginStatus:false,\r\n            favCoins:[],\r\n            signUpFetchFlag:false,\r\n            signInErrorFlag:false,\r\n            email:undefined\r\n        }\r\n    },\r\n    getters:{\r\n        getLoginStatus(state){\r\n            return state.loginStatus\r\n        },\r\n        getFavCoinLength(state):number{\r\n            return state.favCoins.length\r\n        }\r\n    },\r\n    actions:{\r\n        async triggerSignUp(user_info:User_Info){\r\n            this.signUpFetchFlag=true\r\n            try {\r\n                const data=await ofetch(process.env.USER_URL as string,{\r\n                    method:'POST',\r\n                    body:JSON.stringify({\r\n                        email:user_info.email,\r\n                        password:user_info.password\r\n                    })\r\n                })\r\n                this.email=user_info.email\r\n                this.loginStatus=true\r\n                setCookie(10,data.name)\r\n            }catch (err) {\r\n                this.loginStatus=false\r\n                console.log(err)\r\n            }finally {\r\n                this.signUpFetchFlag=false\r\n            }\r\n        },\r\n        async triggerSignIn(user_info:User_Info){\r\n            this.signInErrorFlag=false\r\n            try {\r\n                const data=await ofetch(process.env.USER_URL as string)\r\n                this.signInErrorFlag= !loginValidation(Object.entries(data),user_info)\r\n                if(!this.signInErrorFlag){\r\n                    const targetUser=extractUser(Object.entries(data),user_info)\r\n                    this.email=user_info.email\r\n                    this.loginStatus=true\r\n                    setCookie(10,targetUser[0])\r\n\r\n                }\r\n            }catch (e) {\r\n                this.signInErrorFlag=true\r\n            }\r\n\r\n\r\n         },\r\n        triggerLogout(){\r\n            deleteCookie(10)\r\n            this.email=undefined\r\n            this.loginStatus=false\r\n            this.favCoins=[]\r\n        }\r\n    }\r\n\r\n\r\n\r\n})"],"names":["defineStore","ofetch","loginValidation","setCookie","extractUser","deleteCookie","useUserStore","state","loginStatus","favCoins","signUpFetchFlag","signInErrorFlag","email","undefined","getters","getLoginStatus","getFavCoinLength","length","actions","triggerSignUp","user_info","process","env","USER_URL","method","body","JSON","stringify","password","data","_a","name","console","log","err_1","triggerSignIn","Object","entries","targetUser","triggerLogout"],"sourceRoot":""}